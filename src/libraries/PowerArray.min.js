"use strict";var mainContainer,module=module||void 0,isModule=!1,isBrowser=!0;void 0!==module&&(module.exports={},isModule=!0),"object"==typeof window?mainContainer=window:(isBrowser=!1,mainContainer=global),mainContainer.pa&&console&&console.warn&&console.warn('PowerArray => Cannot load, global variable "pa" already exists. Assuming that pa is already loaded => Trusting older instance'),mainContainer.PowerArray=mainContainer.pa=function(r){if(r.constructor===Array||r.paIsArray)return new paArray(r);if(void 0!==mainContainer.ol&&ol.Collection&&r instanceof ol.Collection)return paArray(r.getArray());if(void 0===r.length)throw new Error("PowerArray => The passed object is not an array, or usable as such.");return new paArray(r)},pa.mainContainer=mainContainer,mainContainer.pa.Range=function(r,n,e){if(!pa.IsNumeric(r))throw new Error('PowerArray => Range fuction => The parameter "from" must be numeric. Wrong value is "'+r+'"');if(!pa.IsNumeric(n))throw new Error('PowerArray => Range fuction => The parameter "to" must be numeric. Received value is "'+n+'"');if(!pa.IsNumeric(e))throw new Error('PowerArray => Range fuction => The parameter "step" must be numeric. Received value is "'+e+'"');r=parseFloat(r),n=parseFloat(n),e=parseFloat(e);for(var t=[],o=r;o<n;)t.push(o),o+=e;return t.push(n),t},mainContainer.pa.config={defaults:{defaultPromiseTimeout:1e4}},mainContainer.pa.utils={},mainContainer.pa.utils={DataTypes:{String:"String",Number:"Number",Date:"Date",Boolean:"Boolean",Object:"Object",ArrayOfObjects:"ArrayOfObjects",ArrayOfPrimitives:"ArrayOfPrimitives",RegExp:"RegExp",Function:"Function",Null:"Null",Undefined:"Undefined"},IsStringDate:function(r){return 20===r.length&&"Z"===r.substr(19,1)&&"T"===r.substr(10,1)},IsArrayOfObjects:function(r){var n;if(!r.paIsArray||void 0===r.length)return!1;for(n=r.length;n--;)if(pa.utils.GetTypeOf(r[n])!==pa.utils.DataTypes.Object)return!1;return!0},parseBoolean:function(r,n){if(!pa.utils.isNullEmptyOrUndefined(r)){var e=r.toUpperCase();if("TRUE"===e)return!0;if("FALSE"===e)return!1}if(n)throw new Error("The string passed to function parseBoolean ("+r+") doesn't match with any valid string");return null},isNullEmptyOrUndefined:function(r){if(null===r||void 0===r)return!0;var n=typeof r;if("boolean"===n)return!1;if(r.paIsArray&&r.length>0)return!1;if("object"===n){for(var e in r)if(r.hasOwnProperty(e))return!1;return!0}if("number"!==n&&"string"!==n&&"undefined"!==n)throw new Error("PowerArray => The function IsNullOrEmpty is designed to evaluate strings and numbers, but something different was provided ("+n+")");return("number"!==n||0!==r)&&(!r||0===(r+"").length)},CopyObjectProps:function(r,n,e,t,o){if(e)e.RunEach(function(e){if(o){var i=r[e];n[e]=pa.utils.isNullEmptyOrUndefined(i)?"":i}else{if(t&&pa.utils.isNullEmptyOrUndefined(r[e]))return;n[e]=r[e]}});else for(var i in r)if(r.hasOwnProperty(i))if(o){var a=r[i];n[i]=pa.utils.isNullEmptyOrUndefined(a)?"":a}else{if(t&&pa.utils.isNullEmptyOrUndefined(r[i]))continue;n[i]=r[i]}},GetTypeOf:function(r,n){if(null===r)return pa.utils.DataTypes.Null;if(void 0===r)return pa.utils.DataTypes.Undefined;switch(typeof r){case"string":return pa.utils.DataTypes.String;case"function":return pa.utils.DataTypes.Function;case"number":return pa.utils.DataTypes.Number;case"boolean":return pa.utils.DataTypes.Boolean;case"object":return r instanceof String?pa.utils.DataTypes.String:r instanceof Date?pa.utils.DataTypes.Date:r instanceof Number?pa.utils.DataTypes.Number:r instanceof RegExp?pa.utils.DataTypes.RegExp:r.paIsArray?n&&pa.utils.IsArrayOfObjects(r)?pa.utils.DataTypes.ArrayOfObjects:pa.utils.DataTypes.ArrayOfPrimitives:pa.utils.DataTypes.Object;default:throw new Error("PowerArray Error : Unknown Datatype!")}},ArgumentsToArray:function(r,n,e){for(var t=0|n,o=e||r.length,i=[];t<o;t++)i.push(r[t]);return i},GenerateUid:function(r,n){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return(void 0!==r?r+"-":"")+e()+"-"+e()+"-"+e()+e()+(void 0!==n?"-"+n:"")},PropsToArray:function(r,n){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push({property:t,value:n?n(r[t]):r[t]});return e}},mainContainer.pa.paEachParalellsHelper={CheckParalellTaskStates:function(r){var n=mainContainer.pa.paEachParalellsHelper.currentParalellIds[r];return n.CompletedTasks===n.TotalProcesses},currentParalellIds:{},actionKeys:{Runeach:"RunEach",TaskState:"TaskState"},eventKeys:{RuneachDone:"RuneachDone",TaskState:"TaskStateResponse"}},mainContainer.pa.paWhereHelper={FillConditions:function(r,n){for(var e,t,o=n.length;o--;){if("function"!=typeof(e=n[o]).condition){if(mainContainer.pa.utils.GetTypeOf(e.condition)===mainContainer.pa.utils.DataTypes.Object)switch(mainContainer.pa.utils.GetTypeOf(r[e.column],!0)){case mainContainer.pa.utils.DataTypes.ArrayOfObjects:case mainContainer.pa.utils.DataTypes.ArrayOfPrimitives:if(void 0!==r[e.column].Where.call(r[e.column],e.condition,!1,!0))continue;return!1;case mainContainer.pa.utils.DataTypes.Object:if(t=pa([r[e.column]]),void 0!==t.Where.call(t,e.condition,!1,!0))continue;return!1}e.condition=pa.EqualTo3(e.condition)}if(!r||!e.condition(r[e.column]))return!1}return!0},ProcessConditionObject:function(r,n,e,t,o){var i,a,s,u,c,l,f=mainContainer.pa.paWhereHelper.FillConditions,p=[];for(e||(r=[r]),i=0,l=r.length;i<l;i++){var h=r[i],d=[];if("function"==typeof h)d.push({column:y,condition:h});else for(var y in h)"realConditions"!==y&&h.hasOwnProperty(y)&&(h[y]&&h[y].paIsArray?h[y].RunEach(function(r){d.push({column:y,condition:r})}):d.push({column:y,condition:h[y]}));h.realConditions=d}if(l=this.length,n)for(i=0;i<l;i++){for(s=this[i],a=0,u=r.length;a<u&&!(c=f(s,r[a].realConditions));a++);if(c){if(t)return o?i:s;p.push(o?i:s)}}else for(;l--;)for(s=this[l],a=0,u=r.length;a<u;a++)if(c=f(s,r[a].realConditions)){if(t)return o?l:s;p.push(o?l:s);break}if(!t)return p},equals:function(r,n,e,t){function o(r,n){var a,s,u,c,l;if((a=toString.call(r))!==toString.call(n))return!1;switch(a){default:return r.valueOf()===n.valueOf();case"[object Number]":return r=+r,n=+n,r?r===n:r===r?1/r==1/n:n!==n;case"[object RegExp]":return r.source==n.source&&r.global==n.global&&r.ignoreCase==n.ignoreCase&&r.multiline==n.multiline&&r.lastIndex==n.lastIndex;case"[object Function]":return!1;case"[object Array]":if(t&&null!==(c=i(r,n)))return c;if((s=r.length)!=n.length)return!1;for(;s--;)if(!((c=r[s])===(l=n[s])&&0!==c||o(c,l)))return!1;return!0;case"[object Object]":if(t&&null!==(c=i(r,n)))return c;if(s=0,e){var f=[];for(u in r)if(r.hasOwnProperty(u)){if(f.push(u),(c=r[u])===(l=n[u])&&0!==c||o(c,l))continue;return!1}for(u in n)if(n.hasOwnProperty(u)&&f[s++]!=u)return!1}else{for(u in r)if(r.hasOwnProperty(u)){if(++s,(c=r[u])===(l=n[u])&&0!==c||o(c,l))continue;return!1}for(u in n)if(n.hasOwnProperty(u)&&--s<0)return!1}return!0}}function i(r,n){var e=[];return(i=function(r,n){for(var t=e.length;t--;)if(e[t--]===n)return e[t]===r;return e.push(r,n),null})(r,n)}return r===n&&0!==r||o(r,n)}},mainContainer.pa.auxiliaryFunctions={Contains:function(r,n,e){return function(t){if(!t.paIsArray)throw new Error("PowerArray error => parameter val passed to Contains function should be an array.");var o=t.length,i=!1;switch(typeof r){case"number":case"string":case"boolean":i=!0;break;default:if("function"==typeof r.getMonth){i=!0;break}i=!1}if(i)return t.indexOf(r)>-1;for(;o--;)if(pa.paWhereHelper.equals(t[o],r,n,e))return!0;return!1}},Between:function(r,n,e){return n<r&&console.warn("PowerArray warn => Parameters 'from' and 'to' passed to function Between() makes no sense: Parameter 'to' ("+n+") should be greater than from ("+r+")"),e?function(e){return e>r&&e<n}:function(e){return e>=r&&e<=n}},EndsWith:function(r){var n=r+"";return function(r){return(r+="").substr(r.length-n.length)===n}},StartsWith:function(r){var n=r+"";return function(r){return 0===(r+="").indexOf(n)}},GreaterOrEqualThan:function(r){return function(n){return n>=r}},GreaterThan:function(r){return function(n){return n>r}},SmallerOrEqualThan:function(r){return function(n){return n<=r}},SmallerThan:function(r){return function(n){return n<r}},EqualTo3:function(r){return function(n){return n===r}},NotEqualTo3:function(r){return function(n){return n!==r}},EqualTo2:function(r){return function(n){return n==r}},NotEqualTo2:function(r){return function(n){return n!=r}},IsUndefined:function(){return function(r){return void 0===r}},IsDefined:function(){return function(r){return void 0!==r}},In:function(r){return arguments.length>1&&(r=Array.prototype.slice.call(arguments)),function(n){return-1!==r.indexOf(n)}},NotIn:function(r){return arguments.length>1&&(r=Array.prototype.slice.call(arguments)),function(n){return-1===r.indexOf(n)}},EqualTo:function(r,n,e,t){return function(o){return n?n(o,r):pa.paWhereHelper.equals(r,o,e,t)}},Like:function(r){return r.paIsArray||(r=Array.prototype.slice.call(arguments)),function(n){for(var e=r.length;e--;)if(-1===n.indexOf(r[e]))return!1;return!0}},NotLike:function(r){return r.paIsArray||(r=Array.prototype.slice.call(arguments)),function(n){for(var e=r.length;e--;)if(n.indexOf(r[e])>-1)return!1;return!0}},LikeIgnoreCase:function(r){if(void 0===r)throw new Error("PowerArray Error => undefined was passed to LikeIgnoreCase");var n="";return r.paIsArray||(r=Array.prototype.slice.call(arguments)),function(e){if(null===e||void 0===e)return!1;for(var t=r.length;t--;)if(n=r[t].toUpperCase(),-1===e.toUpperCase().indexOf(n))return!1;return!0}},NotLikeIgnoreCase:function(r){var n="";return r.paIsArray||(r=Array.prototype.slice.call(arguments)),function(e){for(var t=r.length;t--;)if(n=r[t].toUpperCase(),e.toUpperCase().indexOf(n)>-1)return!1;return!0}},IsTruthy:function(){return function(r){return!!r}},IsFalsy:function(){return function(r){return!r}},IsTrue:function(){return function(r){return!0===r}},IsFalse:function(){return function(r){return!1===r}},IsEmpty:function(){return function(r){return void 0===r||""===r||null===r||0===r||r.paIsArray&&0===r.length}},IsNotEmpty:function(){return function(r){return void 0!==r&&null!==r&&(r+"").length>0}},IsNull:function(){return function(r){return null===r}},IsNotNull:function(){return function(r){return null!==r}},IsNaN:function(){return function(r){return isNaN(r)}},IsNotNaN:function(){return function(r){return!isNaN(r)}},IsNumeric:function(r){return!isNaN(parseFloat(r))&&isFinite(r)},IsInteger:function(r){return r===parseInt(r,10)}},mainContainer.pa.prototypedFunctions_Array={getIndexByProperty:function(r){var n,e,t=this,o=arguments.length,i=t.length;for(e=0;e<i;e++){var a=t[e];for(n=1;n<o;n++){var s=arguments[n],u="()"===s.substring(s.length-2),c=u?s.substr(0,s.length-2):s;if(a=u?a[c]():a[s],n+1===o&&a==r)return e}}return-1},GetPropertyFlat:function(r,n,e,t){var o=this,i=[],a=o.length;if(!0===n)for(var s=0;s<a;s++)(e||-1===i.indexOf(o[s][r]))&&(!0!==t&&void 0===o[s][r]||i.push(o[s][r]));else for(;a--;)(e||-1===i.indexOf(o[a][r]))&&(!0!==t&&void 0===o[a][r]||i.push(o[a][r]));return i},GetByProperty:function(r){var n,e,t=this,o=[],i=arguments.length,a=t.length;for(e=0;e<a;e++){var s=t[e];for(n=1;n<i;n++){var u=arguments[n],c="()"===u.substring(u.length-2),l=c?u.substr(0,u.length-2):u;s=c?s[l]():s[u],n+1===i&&s===r&&o.push(t[e])}}return o},RunEach:function(r,n,e,t){var o=this.length,i=0,a=new Array(this.length);if(e)for(;i<o;i++)a[i]=r(this[i],i,this);else for(;o--;)a[o]=r(this[o],o,this);return n&&(a=n(a)||a),a},Sort:function(r){var n=[],e=typeof r;switch(e){case"string":var t=r.toUpperCase();switch(t){case pa.Sort.Ascending:case pa.Sort.Asc:return this.sort(function(r,n){return r<n?-1:r>n?1:0});case pa.Sort.AscendingIgnoringCase:case pa.Sort.AscIgnoringCase:return this.sort(function(r,n){try{return r.toLowerCase().localeCompare(n.toLowerCase())}catch(e){if(console&&console.warn)return console.warn("PowerArray => Error by sorting by "+t+", all values has to be strings. Probably it's not the case!. Now casting to string, performance may be affected."),r+="",n+="",r.toLowerCase().localeCompare(n.toLowerCase())}});case pa.Sort.Descending:case pa.Sort.Desc:return this.sort(function(r,n){return r>n?-1:r<n?1:0});case pa.Sort.DescendingIgnoringCase:case pa.Sort.DescIgnoringCase:return this.sort(function(r,n){return-1*r.toLowerCase().localeCompare(n.toLowerCase())});default:throw new Error("PowerArray Error: Invalid sort condition. If you pass a first parameter of type String to the Sort function, PowerArray assumes that you have a simple array on your hand (one dimension of primitives). Possible parameter values for function Sort  in that situation, are: 1) To sort Ascending: 'Asc' and 'AscIgnoreCase' (aliases: 'Ascending', 'AscendingIgnoreCase'), and 2) To sort Descending: 'Desc','Descending' (aliases: 'Descending', 'DescendingIgnoreCase') ")}case"object":if(r instanceof RegExp)throw new Error("PowerArray Error: Invalid sortConditions object. A RegExp is not allowed as Sort Criterion!");if(!r&&r.hasOwnProperty("length"))throw new Error("PowerArray Error: Invalid sortConditions object");for(var o in r)if(r.hasOwnProperty(o)){var i=r[o].toUpperCase();if(-1===!mainContainer.pa.Sort._validSortConfigStrings.indexOf(r[o]))throw new Error("PowerArray Configuration Error => Invalid sort direction for property "+o+": '"+r[o]+"'");n.push({column:o,sortDirection:i})}return this.sort(function(r,e){for(var t,o=0,i=n.length;o<i;o++)switch(t=n[o].column,n[o].sortDirection){case mainContainer.pa.Sort.Ascending:case mainContainer.pa.Sort.Asc:case mainContainer.pa.Sort.AscendingIgnoringCase:case mainContainer.pa.Sort.AscIgnoringCase:if(r[t]<e[t])return-1;if(r[t]>e[t])return 1;case mainContainer.pa.Sort.Descending:case mainContainer.pa.Sort.Desc:case mainContainer.pa.Sort.DescendingIgnoringCase:case mainContainer.pa.Sort.DescIgnoringCase:if(r[t]<e[t])return 1;if(r[t]>e[t])return-1}return 0});case"undefined":return this.sort();case"function":return this.sort(r);default:throw new Error("Unknown sortConditions object type ("+e+")")}},Exists:function(r){return"string"==typeof r&&(r=EqualTo3(r)),!!pa.prototypedFunctions_Array.First.call(this,r)},Remove:function(r){"string"==typeof r&&(r=EqualTo3(r));for(var n=this.FirstIndex(r);void 0!==n;)this.splice(n,1),n=this.FirstIndex(r);return this},Distinct:function(){var r,n,e=this.length,t=[],o=[],i=pa.utils.GetTypeOf(this,!0),a=pa.utils.DataTypes;if(i!==a.ArrayOfPrimitives&&i!==a.ArrayOfObjects)throw new Error("PowerArray => Distinct => Currently, the distinct function works only for arrays of primitive data.");if(i!==a.ArrayOfObjects)for(;e--;)r=this[e],-1===t.indexOf(r)&&void 0!==r&&t.push(r);else for(;e--;)n=this[e],r=JSON.stringify(n),-1===o.indexOf(r)&&void 0!==r&&(o.push(r),t.push(n));return t},Iterate:function(r,n){return this.RunEach(r,void 0,n),this},Collect:function(r,n){return this.RunEach(r,void 0,n)},WhereIndexes:function(r,n,e){return this.Where(r,n,e,!0)},Where:function(r,n,e,t){var o,i,a,s=this.length,u=[];if(t=!!t,"object"!=typeof r||r.paIsArray){if(void 0===r){var c=new Error("PowerArray => Where function => No condition object provided to function 'Where(whereConditions, keepOrder)'");throw c.message="InvalidWhereCondition",c}if(r.paIsArray){if(a=pa.paWhereHelper.ProcessConditionObject.call(this,r,n,!0,e,t),e)return a;u.push.apply(u,a)}else if(n){for(o=0;o<s;o++)if(i=this[o],r(i)){if(e)return t?o:i;u.push(i)}}else for(;s--;)if(i=this[s],r(i)){if(e)return t?s:i;u.push(i)}}else{if(!Object.keys(r).length)return this;u=pa.paWhereHelper.ProcessConditionObject.call(this,r,n,!1,e,t)}if(!e)return u;if(void 0!==u){if(u.paIsArray){if(u.length>0)return u[0];return}return u}},Count:function(r){if(1!==arguments.length)throw new Error("PowerArray => Count function => Invalid arguments. The only argument is a whereCondition or an array of whereConditions object.");return pa.prototypedFunctions_Array.Where.call(this,r,!1,!1).length},First:function(r){return 0===arguments.length?this.length>0?this[0]:void 0:pa.prototypedFunctions_Array.Where.call(this,r,!0,!0)},FirstIndex:function(r){return 0===arguments.length?this.length>0?0:void 0:pa.prototypedFunctions_Array.Where.call(this,r,!0,!0,!0)},Average:function(){},Bounds:function(){var r,n,e=this.length,t=arguments.length,o={},i="";if(0===t)throw new Error("PowerArray => bounds => invalid params, please provide one or more target parameters");for(r=t;r--;)o[i=arguments[r]]={min:void 0,max:void 0};for(;e--;)for(r=t;r--;)i=arguments[r],n=this[e][i],(void 0===o[i].max||void 0!==n&&n>o[i].max)&&(o[i].max=n),(void 0===o[i].min||void 0!==n&&n<o[i].min)&&(o[i].min=n);return o},Max:function(){var r,n,e=this.length,t=arguments.length,o={},i="";if(0===t)throw new Error("PowerArray => Max => invalid params, please provide one or more target parameters");for(r=t;r;);for(;e--;)for(r=t;r--;)i=arguments[r],n=this[e][i],(void 0===o[i]||void 0!==n&&n>o[i])&&(o[i]=n);if(1===t)return o[i]},Take:function(r,n){for(var e=0+(n=n||0),t=this.length,o=[],i=0;e<t&&i<r;e++)o.push(this[e]),i++;return o},Last:function(){var r=this.length-1;return r>-1?this[r]:null}},mainContainer.pa.Sort={Ascending:"ASCENDING",Asc:"ASC",AscendingIgnoringCase:"ASCENDINGIGNORINGCASE",AscIgnoringCase:"ASCIGNORINGCASE",Descending:"DESCENDING",Desc:"DESC",DescendingIgnoringCase:"DESCENDINGIGNORINGCASE",DescIgnoringCase:"DESCIGNORINGCASE"};var validSortingConf=[mainContainer.pa.Sort.Ascending,mainContainer.pa.Sort.Asc,mainContainer.pa.Sort.AscendingIgnoringCase,mainContainer.pa.Sort.AscIgnoringCase,mainContainer.pa.Sort.Descending,mainContainer.pa.Sort.Desc,mainContainer.pa.Sort.DescendingIgnoringCase,mainContainer.pa.Sort.DescIgnoringCase];mainContainer.pa.Sort._validSortConfigStrings=validSortingConf,mainContainer.Sort=mainContainer.pa.Sort;var paArray=function(r){if(!r.paIsArray)throw new Error('PowerArray => paArray warning => Invalid array passed to pa() function"');var n=r.slice(0),e=mainContainer.pa.prototypedFunctions_Array;for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n};paArray.prototype.isArray=!0,function(){var r=mainContainer.pa.auxiliaryFunctions;for(var n in r)r.hasOwnProperty(n)&&(mainContainer.pa[n]=r[n],mainContainer[n]?console.warn("PowerArray warning! => property mainContainer."+n+" already exists. PowerArrayFunction pa."+n+' cannot register this function on mainContainer scope. However, you can still using it by calling "pa.'+n+'"'):mainContainer[n]=r[n]);Array.prototype.paIsArray||(Array.prototype.paIsArray=!0);var e=mainContainer.pa.prototypedFunctions_Array;for(var t in e)e.hasOwnProperty(t)&&(Array.prototype.hasOwnProperty(t)?console.warn("PowerArray warning! => Array Prototype was modified by other library, and the function name "+t+" is already in use. PowerArray will NOT override the prototype method. However, you can still using the function "+t+" by surrounding your array with a pa constructor call, as following: pa(yourArrayName)."+t+"(...)"):Array.prototype[t]=e[t],paArray.prototype[t]=e[t])}(),isModule&&(module.exports=mainContainer.pa);
